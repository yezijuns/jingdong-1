{"remainingRequest":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\login\\Login.vue","mtime":1651755266382},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\babel.config.js","mtime":1648882729795},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2EvRGVza3RvcC9WdWUzLjAvXHU0RUFDXHU0RTFDXHU1MjMwXHU1QkI2XHU5ODc5XHU3NkVFL1x1NEVBQ1x1NEUxQ1x1NTIzMFx1NUJCNjMvamluZ2Rvbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICdAdnVlL3JlYWN0aXZpdHknOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgcG9zdCB9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgVG9hc3QsIHsgdXNlVG9hc3RFZmZlY3QgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1RvYXN0JzsKCnZhciB1c2VMb2dpbkVmZmVjdCA9IGZ1bmN0aW9uIHVzZUxvZ2luRWZmZWN0KHNob3dUb2FzdCkgewogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgIHVzZXJuYW1lOiAnJywKICAgIHBhc3N3b3JkOiAnJwogIH0pOwoKICB2YXIgaGFuZGxlTG9naW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcG9zdCgnL2FwaS91c2VyL2xvZ2luJywgewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbXNlLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGRhdGEucGFzc3dvcmQKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC5lcnJubykgPT09IDApIHsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5pc0xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ0hvbWUnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2hvd1RvYXN0KCfnmbvlvZXlpLHotKUnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNzsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIHNob3dUb2FzdCgn6K+35rGC5aSx6LSlJyk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDddXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUxvZ2luKCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBfdG9SZWZzID0gdG9SZWZzKGRhdGEpLAogICAgICB1c2VybmFtZSA9IF90b1JlZnMudXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkID0gX3RvUmVmcy5wYXNzd29yZDsKCiAgcmV0dXJuIHsKICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgIGhhbmRsZUxvZ2luOiBoYW5kbGVMb2dpbgogIH07Cn07Cgp2YXIgdXNlUmVnaXN0ZXJFZmZlY3QgPSBmdW5jdGlvbiB1c2VSZWdpc3RlckVmZmVjdCgpIHsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogIHZhciBoYW5kbGVSZWdpc3RlckNsaWNrID0gZnVuY3Rpb24gaGFuZGxlUmVnaXN0ZXJDbGljaygpIHsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgbmFtZTogJ1JlZ2lzdGVyJwogICAgfSk7CiAgfTsKCiAgcmV0dXJuIHsKICAgIGhhbmRsZVJlZ2lzdGVyQ2xpY2s6IGhhbmRsZVJlZ2lzdGVyQ2xpY2sKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgY29tcG9uZW50czogewogICAgVG9hc3Q6IFRvYXN0CiAgfSwKICAvLyDogYzotKPlsLHmmK/lkYror4nkvaDvvIzku6PnoIHmiafooYznmoTkuIDkuKrmtYHnqIsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX3VzZVRvYXN0RWZmZWN0ID0gdXNlVG9hc3RFZmZlY3QoKSwKICAgICAgICBzaG93ID0gX3VzZVRvYXN0RWZmZWN0LnNob3csCiAgICAgICAgdG9hc3RNZXNzYWdlID0gX3VzZVRvYXN0RWZmZWN0LnRvYXN0TWVzc2FnZSwKICAgICAgICBzaG93VG9hc3QgPSBfdXNlVG9hc3RFZmZlY3Quc2hvd1RvYXN0OwoKICAgIHZhciBfdXNlTG9naW5FZmZlY3QgPSB1c2VMb2dpbkVmZmVjdChzaG93VG9hc3QpLAogICAgICAgIHVzZXJuYW1lID0gX3VzZUxvZ2luRWZmZWN0LnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkID0gX3VzZUxvZ2luRWZmZWN0LnBhc3N3b3JkLAogICAgICAgIGhhbmRsZUxvZ2luID0gX3VzZUxvZ2luRWZmZWN0LmhhbmRsZUxvZ2luOwoKICAgIHZhciBfdXNlUmVnaXN0ZXJFZmZlY3QgPSB1c2VSZWdpc3RlckVmZmVjdCgpLAogICAgICAgIGhhbmRsZVJlZ2lzdGVyQ2xpY2sgPSBfdXNlUmVnaXN0ZXJFZmZlY3QuaGFuZGxlUmVnaXN0ZXJDbGljazsKCiAgICByZXR1cm4gewogICAgICBoYW5kbGVMb2dpbjogaGFuZGxlTG9naW4sCiAgICAgIGhhbmRsZVJlZ2lzdGVyQ2xpY2s6IGhhbmRsZVJlZ2lzdGVyQ2xpY2ssCiAgICAgIHNob3dUb2FzdDogc2hvd1RvYXN0LAogICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgc2hvdzogc2hvdywKICAgICAgdG9hc3RNZXNzYWdlOiB0b2FzdE1lc3NhZ2UKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;AA0BA,SAASA,QAAT,EAAmBC,MAAnB,QAAiC,iBAAjC;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,IAAT,QAAqB,qBAArB;AACA,OAAOC,KAAP,IAAgBC,cAAhB,QAAsC,wBAAtC;;AAEA,IAAMC,cAAa,GAAI,SAAjBA,cAAiB,CAACC,SAAD,EAAe;AACpC,MAAMC,MAAK,GAAIN,SAAS,EAAxB;AACA,MAAMO,IAAG,GAAIT,QAAQ,CAAC;AAAEU,YAAQ,EAAE,EAAZ;AAAgBC,YAAQ,EAAE;AAA1B,GAAD,CAArB;;AACA,MAAMC,WAAU;AAAA,uEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEKT,IAAI,CAAC,iBAAD,EAAoB;AAC3CO,wBAAQ,EAAED,IAAI,CAACI,SAD4B;AAE3CF,wBAAQ,EAAEF,IAAI,CAACE;AAF4B,eAApB,CAFT;;AAAA;AAEVG,oBAFU;;AAMhB,kBAAI,OAAM,SAAN,UAAM,WAAN,kBAAM,CAAEC,KAAR,MAAkB,CAAtB,EAAyB;AACvBC,4BAAY,CAACC,OAAb,GAAuB,IAAvB;AACAT,sBAAM,CAACU,IAAP,CAAY;AAAEC,sBAAI,EAAE;AAAR,iBAAZ;AACF,eAHA,MAGO;AACLZ,yBAAS,CAAC,MAAD,CAAT;AACF;;AAXgB;AAAA;;AAAA;AAAA;AAAA;AAahBA,uBAAS,CAAC,MAAD,CAAT;;AAbgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAVK,WAAU;AAAA;AAAA;AAAA,KAAhB;;AAgBA,gBAA+BX,MAAM,CAACQ,IAAD,CAArC;AAAA,MAAQC,QAAR,WAAQA,QAAR;AAAA,MAAkBC,QAAlB,WAAkBA,QAAlB;;AACA,SAAO;AAAED,YAAQ,EAARA,QAAF;AAAYC,YAAQ,EAARA,QAAZ;AAAsBC,eAAU,EAAVA;AAAtB,GAAP;AACF,CArBA;;AAuBA,IAAMQ,iBAAgB,GAAI,SAApBA,iBAAoB,GAAM;AAC9B,MAAMZ,MAAK,GAAIN,SAAS,EAAxB;;AACA,MAAMmB,mBAAkB,GAAI,SAAtBA,mBAAsB,GAAM;AAChCb,UAAM,CAACU,IAAP,CAAY;AAAEC,UAAI,EAAE;AAAR,KAAZ;AACF,GAFA;;AAGA,SAAO;AAAEE,uBAAkB,EAAlBA;AAAF,GAAP;AACF,CANA;;AAQA,eAAe;AACbF,MAAI,EAAE,OADO;AAEbG,YAAU,EAAE;AAAElB,SAAI,EAAJA;AAAF,GAFC;AAGb;AACAmB,OAJa,mBAIJ;AACP,0BAA0ClB,cAAc,EAAxD;AAAA,QAAQmB,IAAR,mBAAQA,IAAR;AAAA,QAAcC,YAAd,mBAAcA,YAAd;AAAA,QAA4BlB,SAA5B,mBAA4BA,SAA5B;;AACA,0BAA4CD,cAAc,CAACC,SAAD,CAA1D;AAAA,QAAQG,QAAR,mBAAQA,QAAR;AAAA,QAAkBC,QAAlB,mBAAkBA,QAAlB;AAAA,QAA4BC,WAA5B,mBAA4BA,WAA5B;;AACA,6BAAgCQ,iBAAiB,EAAjD;AAAA,QAAQC,mBAAR,sBAAQA,mBAAR;;AAEA,WAAO;AAAET,iBAAW,EAAXA,WAAF;AAAeS,yBAAmB,EAAnBA,mBAAf;AAAoCd,eAAS,EAATA,SAApC;AAA+CG,cAAQ,EAARA,QAA/C;AAAyDC,cAAQ,EAARA,QAAzD;AAAmEa,UAAI,EAAJA,IAAnE;AAAyEC,kBAAW,EAAXA;AAAzE,KAAP;AACF;AAVa,CAAf","names":["reactive","toRefs","useRouter","post","Toast","useToastEffect","useLoginEffect","showToast","router","data","username","password","handleLogin","usernamse","result","errno","localStorage","isLogin","push","name","useRegisterEffect","handleRegisterClick","components","setup","show","toastMessage"],"sourceRoot":"","sources":["C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\login\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n      <img class=\"wrapper__img\" src=\"http://www.dell-lee.com/imgs/vue3/user.png\">\r\n      <div class=\"wrapper__input\">\r\n          <input\r\n           class=\"wrapper__input__content\"\r\n           placeholder=\"请输入用户名\"\r\n           v-model=\"username\"\r\n          />\r\n      </div>\r\n      <div class=\"wrapper__input\">\r\n          <input\r\n           class=\"wrapper__input__content\"\r\n           placeholder=\"请输入密码\"\r\n           type=\"password\"\r\n           v-model=\"password\"\r\n           autocomplete=\"new-password\"\r\n          />\r\n      </div>\r\n      <div class=\"wrapper__login-button\" @click=\"handleLogin\">登录</div>\r\n      <div class=\"wrapper__login-link\" @click=\"handleRegisterClick\">立即注册</div>\r\n  </div>\r\n  <Toast v-if=\"show\" :message=\"toastMessage\"/>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from '@vue/reactivity'\r\nimport { useRouter } from 'vue-router'\r\nimport { post } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\nconst useLoginEffect = (showToast) => {\r\n  const router = useRouter()\r\n  const data = reactive({ username: '', password: '' })\r\n  const handleLogin = async () => {\r\n    try {\r\n      const result = await post('/api/user/login', {\r\n        username: data.usernamse,\r\n        password: data.password\r\n      })\r\n      if (result?.errno === 0) {\r\n        localStorage.isLogin = true\r\n        router.push({ name: 'Home' })\r\n      } else {\r\n        showToast('登录失败')\r\n      }\r\n    } catch (e) {\r\n      showToast('请求失败')\r\n    }\r\n  }\r\n  const { username, password } = toRefs(data)\r\n  return { username, password, handleLogin }\r\n}\r\n\r\nconst useRegisterEffect = () => {\r\n  const router = useRouter()\r\n  const handleRegisterClick = () => {\r\n    router.push({ name: 'Register' })\r\n  }\r\n  return { handleRegisterClick }\r\n}\r\n\r\nexport default {\r\n  name: 'Login',\r\n  components: { Toast },\r\n  // 职责就是告诉你，代码执行的一个流程\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const { username, password, handleLogin } = useLoginEffect(showToast)\r\n    const { handleRegisterClick } = useRegisterEffect()\r\n\r\n    return { handleLogin, handleRegisterClick, showToast, username, password, show, toastMessage }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  &__img {\r\n    display: block;\r\n    height: .66rem;\r\n    width: .66rem;\r\n    margin: 0 auto .4rem auto;\r\n  }\r\n  &__input {\r\n    height: .48rem;\r\n    margin: 0 .4rem .16rem .4rem;\r\n    background: #F9F9F9;\r\n    padding: 0 .16rem;\r\n    border: .01rem solid rgba(0,0,0,0.10);\r\n    border-radius: .06rem;\r\n    border-radius: .06rem;\r\n    &__content {\r\n      margin-top: .12rem;\r\n      width: 100%;\r\n      line-height: .22rem;\r\n      border: none;\r\n      background: none;\r\n      outline: none;\r\n      font-size: .16rem;\r\n      color: $content-notice-fontcolor;\r\n      &::placeholder {\r\n        color: $content-notice-fontcolor;\r\n      }\r\n    }\r\n  }\r\n  &__login-button {\r\n    margin: .32rem .4rem .16rem .4rem;\r\n    line-height: .48rem;\r\n    background: $btn-bgColor;\r\n    box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\r\n    border-radius: .04rem;\r\n    border-radius: .04rem;\r\n    font-size: .16rem;\r\n    color: $bgColor;\r\n    text-align: center;\r\n  }\r\n  &__login-link {\r\n    font-size: .14rem;\r\n    color: $content-notice-fontcolor;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>\r\n"]}]}