{"remainingRequest":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\effects\\cartEffects.js","dependencies":[{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\effects\\cartEffects.js","mtime":1651490323058},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\babel.config.js","mtime":1648882729795},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOyAvLyDotK3nianovabnm7jlhbPpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ29tbW9uQ2FydEVmZmVjdCA9IGZ1bmN0aW9uIHVzZUNvbW1vbkNhcnRFZmZlY3Qoc2hvcElkKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgY2FydExpc3QgPSBzdG9yZS5zdGF0ZS5jYXJ0TGlzdDsKCiAgdmFyIGNoYW5nZUNhcnRJdGVtSW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtSW5mbyhzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbUluZm8nLCB7CiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdEluZm86IHByb2R1Y3RJbmZvLAogICAgICBudW06IG51bQogICAgfSk7CiAgfTsKCiAgdmFyIHByb2R1Y3RMaXN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQ7CgogICAgdmFyIHByb2R1Y3RMaXN0ID0gKChfY2FydExpc3Qkc2hvcElkID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZC5wcm9kdWN0TGlzdCkgfHwgW107CiAgICByZXR1cm4gcHJvZHVjdExpc3Q7CiAgfSk7CiAgdmFyIHNob3BOYW1lID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQyOwoKICAgIHZhciBzaG9wTmFtZSA9ICgoX2NhcnRMaXN0JHNob3BJZDIgPSBjYXJ0TGlzdFtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3Qkc2hvcElkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZDIuc2hvcE5hbWUpIHx8ICcnOwogICAgcmV0dXJuIHNob3BOYW1lOwogIH0pOwogIHZhciBjYWxjdWxhdGlvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDM7CgogICAgdmFyIHByb2R1Y3RMaXN0ID0gKF9jYXJ0TGlzdCRzaG9wSWQzID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jYXJ0TGlzdCRzaG9wSWQzLnByb2R1Y3RMaXN0OwogICAgdmFyIHJlc3VsdCA9IHsKICAgICAgdG90YWw6IDAsCiAgICAgIHByaWNlOiAwLAogICAgICBhbGxDaGVja2VkOiB0cnVlCiAgICB9OwoKICAgIGlmIChwcm9kdWN0TGlzdCkgewogICAgICBmb3IgKHZhciBpIGluIHByb2R1Y3RMaXN0KSB7CiAgICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0TGlzdFtpXTsKICAgICAgICByZXN1bHQudG90YWwgKz0gcHJvZHVjdC5jb3VudDsKCiAgICAgICAgaWYgKHByb2R1Y3QuY2hlY2spIHsKICAgICAgICAgIHJlc3VsdC5wcmljZSArPSBwcm9kdWN0LmNvdW50ICogcHJvZHVjdC5wcmljZTsKICAgICAgICB9CgogICAgICAgIGlmIChwcm9kdWN0LmNvdW50ID4gMCAmJiAhcHJvZHVjdC5jaGVjaykgewogICAgICAgICAgcmVzdWx0LmFsbENoZWNrZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXN1bHQucHJpY2UgPSByZXN1bHQucHJpY2UudG9GaXhlZCgyKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfSk7CiAgcmV0dXJuIHsKICAgIGNhcnRMaXN0OiBjYXJ0TGlzdCwKICAgIHByb2R1Y3RMaXN0OiBwcm9kdWN0TGlzdCwKICAgIHNob3BOYW1lOiBzaG9wTmFtZSwKICAgIGNhbGN1bGF0aW9uczogY2FsY3VsYXRpb25zLAogICAgY2hhbmdlQ2FydEl0ZW1JbmZvOiBjaGFuZ2VDYXJ0SXRlbUluZm8KICB9Owp9Ow=="},{"version":3,"sources":["C:/Users/a/Desktop/Vue3.0/京东到家项目/京东到家3/jingdong/src/effects/cartEffects.js"],"names":["computed","useStore","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","shopName","calculations","result","total","price","allChecked","i","product","count","check","toFixed"],"mappings":";AAAA,SAASA,QAAT,QAAyB,KAAzB;AACA,SAASC,QAAT,QAAyB,MAAzB,C,CACA;;AACA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,MAAD,EAAY;AAC7C,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,QAAQ,GAAGD,KAAK,CAACE,KAAN,CAAYD,QAA7B;;AACA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAACJ,MAAD,EAASK,SAAT,EAAoBC,WAApB,EAAiCC,GAAjC,EAAyC;AAClEN,IAAAA,KAAK,CAACO,MAAN,CAAa,oBAAb,EAAmC;AACjCR,MAAAA,MAAM,EAANA,MADiC;AACzBK,MAAAA,SAAS,EAATA,SADyB;AACdC,MAAAA,WAAW,EAAXA,WADc;AACDC,MAAAA,GAAG,EAAHA;AADC,KAAnC;AAGD,GAJD;;AAKA,MAAME,WAAW,GAAGZ,QAAQ,CAAC,YAAM;AAAA;;AACjC,QAAMY,WAAW,GAAG,qBAAAP,QAAQ,CAACF,MAAD,CAAR,sEAAkBS,WAAlB,KAAiC,EAArD;AACA,WAAOA,WAAP;AACD,GAH2B,CAA5B;AAIA,MAAMC,QAAQ,GAAGb,QAAQ,CAAC,YAAM;AAAA;;AAC9B,QAAMa,QAAQ,GAAG,sBAAAR,QAAQ,CAACF,MAAD,CAAR,wEAAkBU,QAAlB,KAA8B,EAA/C;AACA,WAAOA,QAAP;AACD,GAHwB,CAAzB;AAIA,MAAMC,YAAY,GAAGd,QAAQ,CAAC,YAAM;AAAA;;AAClC,QAAMY,WAAW,wBAAGP,QAAQ,CAACF,MAAD,CAAX,sDAAG,kBAAkBS,WAAtC;AACA,QAAMG,MAAM,GAAG;AAAEC,MAAAA,KAAK,EAAE,CAAT;AAAYC,MAAAA,KAAK,EAAE,CAAnB;AAAsBC,MAAAA,UAAU,EAAE;AAAlC,KAAf;;AACA,QAAIN,WAAJ,EAAiB;AACf,WAAK,IAAMO,CAAX,IAAgBP,WAAhB,EAA6B;AAC3B,YAAMQ,OAAO,GAAGR,WAAW,CAACO,CAAD,CAA3B;AACAJ,QAAAA,MAAM,CAACC,KAAP,IAAgBI,OAAO,CAACC,KAAxB;;AACA,YAAID,OAAO,CAACE,KAAZ,EAAmB;AACjBP,UAAAA,MAAM,CAACE,KAAP,IAAiBG,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACH,KAAzC;AACD;;AACD,YAAIG,OAAO,CAACC,KAAR,GAAgB,CAAhB,IAAqB,CAACD,OAAO,CAACE,KAAlC,EAAyC;AACvCP,UAAAA,MAAM,CAACG,UAAP,GAAoB,KAApB;AACD;AACF;AACF;;AACDH,IAAAA,MAAM,CAACE,KAAP,GAAeF,MAAM,CAACE,KAAP,CAAaM,OAAb,CAAqB,CAArB,CAAf;AACA,WAAOR,MAAP;AACD,GAjB4B,CAA7B;AAkBA,SAAO;AAAEV,IAAAA,QAAQ,EAARA,QAAF;AAAYO,IAAAA,WAAW,EAAXA,WAAZ;AAAyBC,IAAAA,QAAQ,EAARA,QAAzB;AAAmCC,IAAAA,YAAY,EAAZA,YAAnC;AAAiDP,IAAAA,kBAAkB,EAAlBA;AAAjD,GAAP;AACD,CAnCM","sourcesContent":["import { computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\n// 购物车相关逻辑\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', {\r\n      shopId, productId, productInfo, num\r\n    })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || []\r\n    return productList\r\n  })\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || ''\r\n    return shopName\r\n  })\r\n  const calculations = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n    const result = { total: 0, price: 0, allChecked: true }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += (product.count * product.price)\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false\r\n        }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n  return { cartList, productList, shopName, calculations, changeCartItemInfo }\r\n}\r\n"]}]}