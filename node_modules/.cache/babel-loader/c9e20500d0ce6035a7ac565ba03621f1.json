{"remainingRequest":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\effects\\cartEffects.js","dependencies":[{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\effects\\cartEffects.js","mtime":1651584705641},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\babel.config.js","mtime":1648882729795},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOyAvLyDotK3nianovabnm7jlhbPpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ29tbW9uQ2FydEVmZmVjdCA9IGZ1bmN0aW9uIHVzZUNvbW1vbkNhcnRFZmZlY3Qoc2hvcElkKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgY2FydExpc3QgPSBzdG9yZS5zdGF0ZS5jYXJ0TGlzdDsKCiAgdmFyIGNoYW5nZUNhcnRJdGVtSW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtSW5mbyhzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbUluZm8nLCB7CiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdEluZm86IHByb2R1Y3RJbmZvLAogICAgICBudW06IG51bQogICAgfSk7CiAgfTsKCiAgdmFyIHByb2R1Y3RMaXN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQ7CgogICAgdmFyIHByb2R1Y3RMaXN0ID0gKChfY2FydExpc3Qkc2hvcElkID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZC5wcm9kdWN0TGlzdCkgfHwge307CiAgICB2YXIgbm90RW1wdHlQcm9kdWN0TGlzdCA9IHt9OwoKICAgIGZvciAodmFyIGkgaW4gcHJvZHVjdExpc3QpIHsKICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0TGlzdFtpXTsKCiAgICAgIGlmIChwcm9kdWN0LmNvdW50ID4gMCkgewogICAgICAgIG5vdEVtcHR5UHJvZHVjdExpc3RbaV0gPSBwcm9kdWN0OwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHByb2R1Y3RMaXN0OwogIH0pOwogIHZhciBzaG9wTmFtZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfY2FydExpc3Qkc2hvcElkMjsKCiAgICB2YXIgc2hvcE5hbWUgPSAoKF9jYXJ0TGlzdCRzaG9wSWQyID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jYXJ0TGlzdCRzaG9wSWQyLnNob3BOYW1lKSB8fCAnJzsKICAgIHJldHVybiBzaG9wTmFtZTsKICB9KTsKICB2YXIgY2FsY3VsYXRpb25zID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQzOwoKICAgIHZhciBwcm9kdWN0TGlzdCA9IChfY2FydExpc3Qkc2hvcElkMyA9IGNhcnRMaXN0W3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkMy5wcm9kdWN0TGlzdDsKICAgIHZhciByZXN1bHQgPSB7CiAgICAgIHRvdGFsOiAwLAogICAgICBwcmljZTogMCwKICAgICAgYWxsQ2hlY2tlZDogdHJ1ZQogICAgfTsKCiAgICBpZiAocHJvZHVjdExpc3QpIHsKICAgICAgZm9yICh2YXIgaSBpbiBwcm9kdWN0TGlzdCkgewogICAgICAgIHZhciBwcm9kdWN0ID0gcHJvZHVjdExpc3RbaV07CiAgICAgICAgcmVzdWx0LnRvdGFsICs9IHByb2R1Y3QuY291bnQ7CgogICAgICAgIGlmIChwcm9kdWN0LmNoZWNrKSB7CiAgICAgICAgICByZXN1bHQucHJpY2UgKz0gcHJvZHVjdC5jb3VudCAqIHByb2R1Y3QucHJpY2U7CiAgICAgICAgfQoKICAgICAgICBpZiAocHJvZHVjdC5jb3VudCA+IDAgJiYgIXByb2R1Y3QuY2hlY2spIHsKICAgICAgICAgIHJlc3VsdC5hbGxDaGVja2VkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmVzdWx0LnByaWNlID0gcmVzdWx0LnByaWNlLnRvRml4ZWQoMik7CiAgICByZXR1cm4gcmVzdWx0OwogIH0pOwogIHJldHVybiB7CiAgICBjYXJ0TGlzdDogY2FydExpc3QsCiAgICBwcm9kdWN0TGlzdDogcHJvZHVjdExpc3QsCiAgICBzaG9wTmFtZTogc2hvcE5hbWUsCiAgICBjYWxjdWxhdGlvbnM6IGNhbGN1bGF0aW9ucywKICAgIGNoYW5nZUNhcnRJdGVtSW5mbzogY2hhbmdlQ2FydEl0ZW1JbmZvCiAgfTsKfTs="},{"version":3,"sources":["C:/Users/a/Desktop/Vue3.0/京东到家项目/京东到家3/jingdong/src/effects/cartEffects.js"],"names":["computed","useStore","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","notEmptyProductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed"],"mappings":";AAAA,SAASA,QAAT,QAAyB,KAAzB;AACA,SAASC,QAAT,QAAyB,MAAzB,C,CACA;;AACA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,MAAD,EAAY;AAC7C,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,QAAQ,GAAGD,KAAK,CAACE,KAAN,CAAYD,QAA7B;;AACA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAACJ,MAAD,EAASK,SAAT,EAAoBC,WAApB,EAAiCC,GAAjC,EAAyC;AAClEN,IAAAA,KAAK,CAACO,MAAN,CAAa,oBAAb,EAAmC;AACjCR,MAAAA,MAAM,EAANA,MADiC;AACzBK,MAAAA,SAAS,EAATA,SADyB;AACdC,MAAAA,WAAW,EAAXA,WADc;AACDC,MAAAA,GAAG,EAAHA;AADC,KAAnC;AAGD,GAJD;;AAKA,MAAME,WAAW,GAAGZ,QAAQ,CAAC,YAAM;AAAA;;AACjC,QAAMY,WAAW,GAAG,qBAAAP,QAAQ,CAACF,MAAD,CAAR,sEAAkBS,WAAlB,KAAiC,EAArD;AACA,QAAMC,mBAAmB,GAAG,EAA5B;;AACA,SAAK,IAAMC,CAAX,IAAgBF,WAAhB,EAA6B;AAC3B,UAAMG,OAAO,GAAGH,WAAW,CAACE,CAAD,CAA3B;;AACA,UAAIC,OAAO,CAACC,KAAR,GAAgB,CAApB,EAAuB;AACrBH,QAAAA,mBAAmB,CAACC,CAAD,CAAnB,GAAyBC,OAAzB;AACD;AACF;;AACD,WAAOH,WAAP;AACD,GAV2B,CAA5B;AAWA,MAAMK,QAAQ,GAAGjB,QAAQ,CAAC,YAAM;AAAA;;AAC9B,QAAMiB,QAAQ,GAAG,sBAAAZ,QAAQ,CAACF,MAAD,CAAR,wEAAkBc,QAAlB,KAA8B,EAA/C;AACA,WAAOA,QAAP;AACD,GAHwB,CAAzB;AAIA,MAAMC,YAAY,GAAGlB,QAAQ,CAAC,YAAM;AAAA;;AAClC,QAAMY,WAAW,wBAAGP,QAAQ,CAACF,MAAD,CAAX,sDAAG,kBAAkBS,WAAtC;AACA,QAAMO,MAAM,GAAG;AAAEC,MAAAA,KAAK,EAAE,CAAT;AAAYC,MAAAA,KAAK,EAAE,CAAnB;AAAsBC,MAAAA,UAAU,EAAE;AAAlC,KAAf;;AACA,QAAIV,WAAJ,EAAiB;AACf,WAAK,IAAME,CAAX,IAAgBF,WAAhB,EAA6B;AAC3B,YAAMG,OAAO,GAAGH,WAAW,CAACE,CAAD,CAA3B;AACAK,QAAAA,MAAM,CAACC,KAAP,IAAgBL,OAAO,CAACC,KAAxB;;AACA,YAAID,OAAO,CAACQ,KAAZ,EAAmB;AACjBJ,UAAAA,MAAM,CAACE,KAAP,IAAiBN,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACM,KAAzC;AACD;;AACD,YAAIN,OAAO,CAACC,KAAR,GAAgB,CAAhB,IAAqB,CAACD,OAAO,CAACQ,KAAlC,EAAyC;AACvCJ,UAAAA,MAAM,CAACG,UAAP,GAAoB,KAApB;AACD;AACF;AACF;;AACDH,IAAAA,MAAM,CAACE,KAAP,GAAeF,MAAM,CAACE,KAAP,CAAaG,OAAb,CAAqB,CAArB,CAAf;AACA,WAAOL,MAAP;AACD,GAjB4B,CAA7B;AAkBA,SAAO;AAAEd,IAAAA,QAAQ,EAARA,QAAF;AAAYO,IAAAA,WAAW,EAAXA,WAAZ;AAAyBK,IAAAA,QAAQ,EAARA,QAAzB;AAAmCC,IAAAA,YAAY,EAAZA,YAAnC;AAAiDX,IAAAA,kBAAkB,EAAlBA;AAAjD,GAAP;AACD,CA1CM","sourcesContent":["import { computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\n// 购物车相关逻辑\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', {\r\n      shopId, productId, productInfo, num\r\n    })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || {}\r\n    const notEmptyProductList = {}\r\n    for (const i in productList) {\r\n      const product = productList[i]\r\n      if (product.count > 0) {\r\n        notEmptyProductList[i] = product\r\n      }\r\n    }\r\n    return productList\r\n  })\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || ''\r\n    return shopName\r\n  })\r\n  const calculations = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n    const result = { total: 0, price: 0, allChecked: true }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += (product.count * product.price)\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false\r\n        }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n  return { cartList, productList, shopName, calculations, changeCartItemInfo }\r\n}\r\n"]}]}