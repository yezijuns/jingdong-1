{"remainingRequest":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\orderConfirmation\\Order.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\orderConfirmation\\Order.vue","mtime":1651584149831},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\babel.config.js","mtime":1648882729795},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2EvRGVza3RvcC9WdWUzLjAvXHU0RUFDXHU0RTFDXHU1MjMwXHU1QkI2XHU5ODc5XHU3NkVFL1x1NEVBQ1x1NEUxQ1x1NTIzMFx1NUJCNjMvamluZ2Rvbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgcG9zdCB9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgeyB1c2VDb21tb25DYXJ0RWZmZWN0IH0gZnJvbSAnLi4vLi4vZWZmZWN0cy9jYXJ0RWZmZWN0cyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnT3JkZXInLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgdmFyIHNob3BJZCA9IHBhcnNlSW50KHJvdXRlLnBhcmFtcy5pZCwgMTApOwoKICAgIHZhciBfdXNlQ29tbW9uQ2FydEVmZmVjdCA9IHVzZUNvbW1vbkNhcnRFZmZlY3Qoc2hvcElkKSwKICAgICAgICBjYWxjdWxhdGlvbnMgPSBfdXNlQ29tbW9uQ2FydEVmZmVjdC5jYWxjdWxhdGlvbnMsCiAgICAgICAgc2hvcE5hbWUgPSBfdXNlQ29tbW9uQ2FydEVmZmVjdC5zaG9wTmFtZSwKICAgICAgICBwcm9kdWN0TGlzdCA9IF91c2VDb21tb25DYXJ0RWZmZWN0LnByb2R1Y3RMaXN0OwoKICAgIHZhciBoYW5kbGVDb25maXJtT3JkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShpc0NhbmNlbGVkKSB7CiAgICAgICAgdmFyIHByb2R1Y3RzLCBpLCBwcm9kdWN0LCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcHJvZHVjdHMgPSBbXTsKCiAgICAgICAgICAgICAgICBmb3IgKGkgaW4gcHJvZHVjdExpc3QudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgcHJvZHVjdCA9IHByb2R1Y3RMaXN0LnZhbHVlW2ldOwogICAgICAgICAgICAgICAgICBwcm9kdWN0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBpZDogcGFyc2VJbnQocHJvZHVjdC5faWQsIDEwKSwKICAgICAgICAgICAgICAgICAgICBudW06IHByb2R1Y3QuY291bnQKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvZHVjdHMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBwb3N0KCcvYXBpL29yZGVyJywgewogICAgICAgICAgICAgICAgICBhZGRyZXNzSWQ6IDEsCiAgICAgICAgICAgICAgICAgIHNob3BJZDogc2hvcElkLAogICAgICAgICAgICAgICAgICBzaG9wTmFtZTogc2hvcE5hbWUudmFsdWUsCiAgICAgICAgICAgICAgICAgIGlzQ2FuY2VsZWQ6IGlzQ2FuY2VsZWQsCiAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiB7fQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwoKICAgICAgICAgICAgICAgIGlmICgocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LmVycm5vKSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ2NsZWFyJyk7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxMV1dKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1PcmRlcihfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgY2FsY3VsYXRpb25zOiBjYWxjdWxhdGlvbnMsCiAgICAgIGhhbmRsZUNvbmZpcm1PcmRlcjogaGFuZGxlQ29uZmlybU9yZGVyCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;AAwBA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,YAApC;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,IAAT,QAAqB,qBAArB;AACA,SAASC,mBAAT,QAAoC,2BAApC;AACA,eAAe;AACbC,MAAI,EAAE,OADO;AAEbC,OAFa,mBAEJ;AACP,QAAMC,MAAK,GAAIP,SAAS,EAAxB;AACA,QAAMQ,KAAI,GAAIP,QAAQ,EAAtB;AACA,QAAMQ,KAAI,GAAIP,QAAQ,EAAtB;AACA,QAAMQ,MAAK,GAAIC,QAAQ,CAACH,KAAK,CAACI,MAAN,CAAaC,EAAd,EAAkB,EAAlB,CAAvB;;AACA,+BAAgDT,mBAAmB,CAACM,MAAD,CAAnE;AAAA,QAAQI,YAAR,wBAAQA,YAAR;AAAA,QAAsBC,QAAtB,wBAAsBA,QAAtB;AAAA,QAAgCC,WAAhC,wBAAgCA,WAAhC;;AACA,QAAMC,kBAAiB;AAAA,yEAAI,iBAAOC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBC,wBADmB,GACR,EADQ;;AAEzB,qBAAWC,CAAX,IAAgBJ,WAAW,CAACK,KAA5B,EAAmC;AAC3BC,yBAD2B,GACjBN,WAAW,CAACK,KAAZ,CAAkBD,CAAlB,CADiB;AAEjCD,0BAAQ,CAACI,IAAT,CAAc;AAAEV,sBAAE,EAAEF,QAAQ,CAACW,OAAO,CAACE,GAAT,EAAc,EAAd,CAAd;AAAiCC,uBAAG,EAAEH,OAAO,CAACI;AAA9C,mBAAd;AACF;;AACAC,uBAAO,CAACC,GAAR,CAAYT,QAAZ;AANyB;AAAA;AAAA,uBAQFhB,IAAI,CAAC,YAAD,EAAe;AACtC0B,2BAAS,EAAE,CAD2B;AAEtCnB,wBAAM,EAANA,MAFsC;AAGtCK,0BAAQ,EAAEA,QAAQ,CAACM,KAHmB;AAItCH,4BAAU,EAAVA,UAJsC;AAKtCC,0BAAQ,EAAE;AAL4B,iBAAf,CARF;;AAAA;AAQjBW,sBARiB;AAgBvBH,uBAAO,CAACC,GAAR,CAAYE,MAAZ;;AACA,oBAAI,OAAM,SAAN,UAAM,WAAN,kBAAM,CAAEC,KAAR,MAAkB,CAAtB,EAAyB;AACvBtB,uBAAK,CAACuB,MAAN,CAAa,OAAb;AACAzB,wBAAM,CAACgB,IAAP,CAAY;AAAElB,wBAAI,EAAE;AAAR,mBAAZ;AACF;;AApBuB;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAjBY,kBAAiB;AAAA;AAAA;AAAA,OAAvB;;AAyBA,WAAO;AAAEH,kBAAY,EAAZA,YAAF;AAAgBG,wBAAiB,EAAjBA;AAAhB,KAAP;AACF;AAlCa,CAAf","names":["useRouter","useRoute","useStore","post","useCommonCartEffect","name","setup","router","route","store","shopId","parseInt","params","id","calculations","shopName","productList","handleConfirmOrder","isCanceled","products","i","value","product","push","_id","num","count","console","log","addressId","result","errno","commit"],"sourceRoot":"","sources":["C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\orderConfirmation\\Order.vue"],"sourcesContent":["<template>\r\n<div class=\"order\">\r\n  <div class=\"order__price\">实付金额 <b>¥{{calculations.price}}</b></div>\r\n  <div class=\"order__btn\">提交订单</div>\r\n</div>\r\n<div class=\"mask\">\r\n  <div class=\"mask__content\">\r\n    <h3 class=\"mask__content__title\">确认离开收银台？</h3>\r\n    <p class=\"mask__content__desc\">请尽快完成支付，否则将会被取消</p>\r\n    <div class=\"mask__content__btns\">\r\n      <div\r\n       class=\"mask__content__btn mask__content__btn--first\"\r\n       @click=\"() => handleConfirmOrder(true)\"\r\n      >取消订单</div>\r\n      <div\r\n       class=\"mask__content__btn mask__content__btn--last\"\r\n       @click=\"() => handleConfirmOrder(false)\"\r\n      >确认支付</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { post } from '../../utils/request'\r\nimport { useCommonCartEffect } from '../../effects/cartEffects'\r\nexport default {\r\n  name: 'Order',\r\n  setup () {\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const store = useStore()\r\n    const shopId = parseInt(route.params.id, 10)\r\n    const { calculations, shopName, productList } = useCommonCartEffect(shopId)\r\n    const handleConfirmOrder = async (isCanceled) => {\r\n      const products = []\r\n      for (const i in productList.value) {\r\n        const product = productList.value[i]\r\n        products.push({ id: parseInt(product._id, 10), num: product.count })\r\n      }\r\n      console.log(products)\r\n      try {\r\n        const result = await post('/api/order', {\r\n          addressId: 1,\r\n          shopId,\r\n          shopName: shopName.value,\r\n          isCanceled,\r\n          products: {\r\n          }\r\n        })\r\n        console.log(result)\r\n        if (result?.errno === 0) {\r\n          store.commit('clear')\r\n          router.push({ name: 'Home' })\r\n        }\r\n      } catch (e) {\r\n        // 提示下单失败\r\n      }\r\n    }\r\n    return { calculations, handleConfirmOrder }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.order {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  display: flex;\r\n  height: .49rem;\r\n  line-height: .49rem;\r\n  background: $bgColor;\r\n  &__price {\r\n    flex: 1;\r\n    text-indent: .24rem;\r\n    font-size: .14rem;\r\n    color: $content-fontcolor;\r\n  }\r\n  &__btn {\r\n    width: .98rem;\r\n    background: #4FB0F9;\r\n    color: $bgColor;\r\n    text-align: center;\r\n    font-size: .14rem;\r\n  }\r\n}\r\n\r\n.mask {\r\n  z-index: 1;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  top: 0;\r\n  background: rgba(0,0,0,0.50);\r\n  &__content {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 3rem;\r\n    height: 1.56rem;\r\n    background: #FFF;\r\n    text-align: center;\r\n    border-radius: 0.04rem;\r\n    &__title {\r\n    margin: .24rem 0 0 0;\r\n    line-height: .26rem;\r\n    font-size: .18rem;\r\n    color: #333;\r\n    }\r\n    &__desc {\r\n      margin: .08rem 0 0 0;\r\n      font-size: .14rem;\r\n      color: #666;\r\n    }\r\n    &__btns {\r\n      display: flex;\r\n      margin: .24rem .58rem;\r\n    }\r\n    &__btn {\r\n      flex: 1;\r\n      width: .8rem;\r\n      line-height: .32rem;\r\n      border: .01rem solid #4FB0F9;\r\n      border-radius: .16rem;\r\n      &--first {\r\n        margin-right: .12rem;\r\n        border: .01rem solid #4FB0F9;\r\n        color: #4FB0F9;\r\n      }\r\n      &--last {\r\n        margin-left: .12rem;\r\n        background: #4FB0F9;\r\n        color: #FFF;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}