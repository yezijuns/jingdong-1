{"remainingRequest":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\shop\\Content.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\shop\\Content.vue","mtime":1650889589022},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\babel.config.js","mtime":1648882729795},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2EvRGVza3RvcC9WdWUzLjAvXHU0RUFDXHU0RTFDXHU1MjMwXHU1QkI2XHU5ODc5XHU3NkVFL1x1NEVBQ1x1NEUxQ1x1NTIzMFx1NUJCNjMvamluZ2Rvbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHJlYWN0aXZlLCByZWYsIHRvUmVmcywgd2F0Y2hFZmZlY3QgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBnZXQgfSBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IHsgdXNlQ29tbW9uQ2FydEVmZmVjdCB9IGZyb20gJy4vY29tbW9uQ2FydEVmZmVjdCc7CnZhciBjYXRlZ29yaWVzID0gW3sKICBuYW1lOiAn5YWo6YOo5ZWG5ZOBJywKICB0YWI6ICdhbGwnCn0sIHsKICBuYW1lOiAn56eS5p2AJywKICB0YWI6ICdzZWNraWxsJwp9LCB7CiAgbmFtZTogJ+aWsOmynOawtOaenCcsCiAgdGFiOiAnZnJ1aXQnCn1dOyAvLyBUYWIg5YiH5o2i55u45YWz55qE6YC76L6RCgp2YXIgdXNlVGFiRWZmZWN0ID0gZnVuY3Rpb24gdXNlVGFiRWZmZWN0KCkgewogIHZhciBjdXJyZW50VGFiID0gcmVmKGNhdGVnb3JpZXNbMF0udGFiKTsKCiAgdmFyIGhhbmRsZVRhYkNsaWNrID0gZnVuY3Rpb24gaGFuZGxlVGFiQ2xpY2sodGFiKSB7CiAgICBjdXJyZW50VGFiLnZhbHVlID0gdGFiOwogIH07CgogIHJldHVybiB7CiAgICBjdXJyZW50VGFiOiBjdXJyZW50VGFiLAogICAgaGFuZGxlVGFiQ2xpY2s6IGhhbmRsZVRhYkNsaWNrCiAgfTsKfTsgLy8g5YiX6KGo5YaF5a6555u45YWz55qE6YC76L6RCgoKdmFyIHVzZUN1cnJlbnRMaXN0RWZmZWN0ID0gZnVuY3Rpb24gdXNlQ3VycmVudExpc3RFZmZlY3QoY3VycmVudFRhYiwgc2hvcElkKSB7CiAgdmFyIGNvbnRlbnQgPSByZWFjdGl2ZSh7CiAgICBsaXN0OiBbXQogIH0pOwoKICB2YXIgZ2V0Q29udGVudERhdGEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfcmVzdWx0JGRhdGE7CgogICAgICB2YXIgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGdldCgiL2FwaS9zaG9wLyIuY29uY2F0KHNob3BJZCwgIi9wcm9kdWN0cyIpLCB7CiAgICAgICAgICAgICAgICB0YWI6IGN1cnJlbnRUYWIudmFsdWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC5lcnJubykgPT09IDAgJiYgcmVzdWx0ICE9PSBudWxsICYmIHJlc3VsdCAhPT0gdm9pZCAwICYmIChfcmVzdWx0JGRhdGEgPSByZXN1bHQuZGF0YSkgIT09IG51bGwgJiYgX3Jlc3VsdCRkYXRhICE9PSB2b2lkIDAgJiYgX3Jlc3VsdCRkYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgY29udGVudC5saXN0ID0gcmVzdWx0LmRhdGE7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0Q29udGVudERhdGEoKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgd2F0Y2hFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgZ2V0Q29udGVudERhdGEoKTsKICB9KTsKCiAgdmFyIF90b1JlZnMgPSB0b1JlZnMoY29udGVudCksCiAgICAgIGxpc3QgPSBfdG9SZWZzLmxpc3Q7CgogIHJldHVybiB7CiAgICBsaXN0OiBsaXN0CiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29udGVudCcsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICAgIHZhciBzaG9wSWQgPSByb3V0ZS5wYXJhbXMuaWQ7CgogICAgdmFyIF91c2VUYWJFZmZlY3QgPSB1c2VUYWJFZmZlY3QoKSwKICAgICAgICBjdXJyZW50VGFiID0gX3VzZVRhYkVmZmVjdC5jdXJyZW50VGFiLAogICAgICAgIGhhbmRsZVRhYkNsaWNrID0gX3VzZVRhYkVmZmVjdC5oYW5kbGVUYWJDbGljazsKCiAgICB2YXIgX3VzZUN1cnJlbnRMaXN0RWZmZWN0ID0gdXNlQ3VycmVudExpc3RFZmZlY3QoY3VycmVudFRhYiwgc2hvcElkKSwKICAgICAgICBsaXN0ID0gX3VzZUN1cnJlbnRMaXN0RWZmZWN0Lmxpc3Q7CgogICAgdmFyIF91c2VDb21tb25DYXJ0RWZmZWN0ID0gdXNlQ29tbW9uQ2FydEVmZmVjdCgpLAogICAgICAgIGNoYW5nZUl0ZW1JbmZvID0gX3VzZUNvbW1vbkNhcnRFZmZlY3QuY2hhbmdlSXRlbUluZm8sCiAgICAgICAgY2FydExpc3QgPSBfdXNlQ29tbW9uQ2FydEVmZmVjdC5jYXJ0TGlzdDsKCiAgICByZXR1cm4gewogICAgICBjYXRlZ29yaWVzOiBjYXRlZ29yaWVzLAogICAgICBjdXJyZW50VGFiOiBjdXJyZW50VGFiLAogICAgICBoYW5kbGVUYWJDbGljazogaGFuZGxlVGFiQ2xpY2ssCiAgICAgIGxpc3Q6IGxpc3QsCiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBjaGFuZ2VJdGVtSW5mbzogY2hhbmdlSXRlbUluZm8sCiAgICAgIGNhcnRMaXN0OiBjYXJ0TGlzdAogICAgfTsKICB9Cn07"},{"version":3,"mappings":";;AA4CA,SAASA,QAAT,EAAmBC,GAAnB,EAAwBC,MAAxB,EAAgCC,WAAhC,QAAmD,KAAnD;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,SAASC,GAAT,QAAoB,qBAApB;AACA,SAASC,mBAAT,QAAoC,oBAApC;AAEA,IAAMC,UAAS,GAAI,CACjB;AAAEC,MAAI,EAAE,MAAR;AAAgBC,KAAG,EAAE;AAArB,CADiB,EAEjB;AAAED,MAAI,EAAE,IAAR;AAAcC,KAAG,EAAE;AAAnB,CAFiB,EAGjB;AAAED,MAAI,EAAE,MAAR;AAAgBC,KAAG,EAAE;AAArB,CAHiB,CAAnB,C,CAMA;;AACA,IAAMC,YAAW,GAAI,SAAfA,YAAe,GAAM;AACzB,MAAMC,UAAS,GAAIV,GAAG,CAACM,UAAU,CAAC,CAAD,CAAV,CAAcE,GAAf,CAAtB;;AACA,MAAMG,cAAa,GAAI,SAAjBA,cAAiB,CAACH,GAAD,EAAS;AAC9BE,cAAU,CAACE,KAAX,GAAmBJ,GAAnB;AACF,GAFA;;AAGA,SAAO;AAAEE,cAAU,EAAVA,UAAF;AAAcC,kBAAa,EAAbA;AAAd,GAAP;AACF,CANA,C,CAQA;;;AACA,IAAME,oBAAmB,GAAI,SAAvBA,oBAAuB,CAACH,UAAD,EAAaI,MAAb,EAAwB;AACnD,MAAMC,OAAM,GAAIhB,QAAQ,CAAC;AAAEiB,QAAI,EAAE;AAAR,GAAD,CAAxB;;AACA,MAAMC,cAAa;AAAA,uEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACAb,GAAG,qBAAcU,MAAd,gBAAiC;AACvDN,mBAAG,EAAEE,UAAU,CAACE;AADuC,eAAjC,CADH;;AAAA;AACfM,oBADe;;AAIrB,kBAAI,OAAM,SAAN,UAAM,WAAN,kBAAM,CAAEC,KAAR,MAAkB,CAAlB,IAAuBD,MAAvB,aAAuBA,MAAvB,+BAAuBA,MAAM,CAAEE,IAA/B,yCAAuB,aAAcC,MAAzC,EAAiD;AAC/CN,uBAAO,CAACC,IAAR,GAAeE,MAAM,CAACE,IAAtB;AACF;;AANqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAbH,cAAa;AAAA;AAAA;AAAA,KAAnB;;AAQAf,aAAW,CAAC,YAAM;AAAEe,kBAAc;AAAI,GAA3B,CAAX;;AACA,gBAAiBhB,MAAM,CAACc,OAAD,CAAvB;AAAA,MAAQC,IAAR,WAAQA,IAAR;;AACA,SAAO;AAAEA,QAAG,EAAHA;AAAF,GAAP;AACF,CAbA;;AAeA,eAAe;AACbT,MAAI,EAAE,SADO;AAEbe,OAFa,mBAEJ;AACP,QAAMC,KAAI,GAAIpB,QAAQ,EAAtB;AACA,QAAMW,MAAK,GAAIS,KAAK,CAACC,MAAN,CAAaC,EAA5B;;AACA,wBAAuChB,YAAY,EAAnD;AAAA,QAAQC,UAAR,iBAAQA,UAAR;AAAA,QAAoBC,cAApB,iBAAoBA,cAApB;;AACA,gCAAiBE,oBAAoB,CAACH,UAAD,EAAaI,MAAb,CAArC;AAAA,QAAQE,IAAR,yBAAQA,IAAR;;AACA,+BAAqCX,mBAAmB,EAAxD;AAAA,QAAQqB,cAAR,wBAAQA,cAAR;AAAA,QAAwBC,QAAxB,wBAAwBA,QAAxB;;AACA,WAAO;AACLrB,gBAAU,EAAVA,UADK;AACOI,gBAAU,EAAVA,UADP;AACmBC,oBAAc,EAAdA,cADnB;AACmCK,UAAI,EAAJA,IADnC;AACyCF,YAAM,EAANA,MADzC;AACiDY,oBAAc,EAAdA,cADjD;AACiEC,cAAO,EAAPA;AADjE,KAAP;AAGF;AAXa,CAAf","names":["reactive","ref","toRefs","watchEffect","useRoute","get","useCommonCartEffect","categories","name","tab","useTabEffect","currentTab","handleTabClick","value","useCurrentListEffect","shopId","content","list","getContentData","result","errno","data","length","setup","route","params","id","changeItemInfo","cartList"],"sourceRoot":"","sources":["C:\\Users\\a\\Desktop\\Vue3.0\\京东到家项目\\京东到家3\\jingdong\\src\\views\\shop\\Content.vue"],"sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"category\">\r\n      <div\r\n        :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\r\n        v-for=\"item in categories\"\r\n        :key=\"item.name\"\r\n        @click=\"() => handleTabClick(item.tab)\"\r\n      >\r\n        {{item.name}}\r\n      </div>\r\n    </div>\r\n    <div class=\"product\">\r\n      <div\r\n        class=\"product__item\"\r\n        v-for=\"item in list\"\r\n        :key=\"item._id\"\r\n      >\r\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\r\n        <div class=\"product__item__detail\">\r\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\r\n          <p class=\"product__item__sales\">月售 {{item.sales}} 件</p>\r\n          <p class=\"product__item__price\">\r\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\r\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\r\n          </p>\r\n        </div>\r\n        <div class=\"product__number\">\r\n          <span\r\n           class=\"product__number__minus\"\r\n           @click=\"() => { changeItemInfo(shopId, item._id, item, -1) }\"\r\n          >-</span>\r\n            {{cartList?.[shopId]?.[item._id]?.count || 0}}\r\n          <span\r\n            class=\"product__number__plus\"\r\n            @click=\"() => { changeItemInfo(shopId, item._id, item, 1) }\"\r\n          >+</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, toRefs, watchEffect } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { get } from '../../utils/request'\r\nimport { useCommonCartEffect } from './commonCartEffect'\r\n\r\nconst categories = [\r\n  { name: '全部商品', tab: 'all' },\r\n  { name: '秒杀', tab: 'seckill' },\r\n  { name: '新鲜水果', tab: 'fruit' }\r\n]\r\n\r\n// Tab 切换相关的逻辑\r\nconst useTabEffect = () => {\r\n  const currentTab = ref(categories[0].tab)\r\n  const handleTabClick = (tab) => {\r\n    currentTab.value = tab\r\n  }\r\n  return { currentTab, handleTabClick }\r\n}\r\n\r\n// 列表内容相关的逻辑\r\nconst useCurrentListEffect = (currentTab, shopId) => {\r\n  const content = reactive({ list: [] })\r\n  const getContentData = async () => {\r\n    const result = await get(`/api/shop/${shopId}/products`, {\r\n      tab: currentTab.value\r\n    })\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      content.list = result.data\r\n    }\r\n  }\r\n  watchEffect(() => { getContentData() })\r\n  const { list } = toRefs(content)\r\n  return { list }\r\n}\r\n\r\nexport default {\r\n  name: 'Content',\r\n  setup () {\r\n    const route = useRoute()\r\n    const shopId = route.params.id\r\n    const { currentTab, handleTabClick } = useTabEffect()\r\n    const { list } = useCurrentListEffect(currentTab, shopId)\r\n    const { changeItemInfo, cartList } = useCommonCartEffect()\r\n    return {\r\n      categories, currentTab, handleTabClick, list, shopId, changeItemInfo, cartList\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables';\r\n@import '../../style/mixins';\r\n.content {\r\n  display: flex;\r\n  position: absolute;\r\n  top: 1.55rem;\r\n  left: 0;\r\n  bottom: .5rem;\r\n  right: 0;\r\n}\r\n.category {\r\n  overflow-y: scroll;\r\n  height: 100%;\r\n  width: .76rem;\r\n  background: $search-bgColor;\r\n  &__item{\r\n    line-height: .4rem;\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    color: $content-fontcolor;\r\n    &--active {\r\n      background: $bgColor;\r\n    }\r\n  }\r\n}\r\n.product {\r\n  overflow-y: scroll;\r\n  flex: 1;\r\n  &__item {\r\n    position: relative;\r\n    display: flex;\r\n    padding: .12rem 0;\r\n    margin: 0 .16rem;\r\n    border-bottom: .01rem solid $content-bgColor;\r\n    &__img {\r\n      width: .68rem;\r\n      height: .68rem;\r\n    }\r\n    &__detail {\r\n      margin-left: .16rem;\r\n      overflow: hidden;\r\n    }\r\n    &__title {\r\n      margin: 0;\r\n      line-height: .2rem;\r\n      font-size: .12rem;\r\n      color: $content-fontcolor;\r\n      @include ellipsis;\r\n    }\r\n    &__sales {\r\n      margin: 0.06rem 0;\r\n      font-size: .12rem;\r\n      color: $content-fontcolor;\r\n      line-height: .12rem;\r\n    }\r\n    &__price {\r\n      margin: 0;\r\n      font-size: .14rem;\r\n      color: #ac8c8c;\r\n      line-height: .2rem;\r\n    }\r\n    &__yen {\r\n      font-size: .12rem;\r\n    }\r\n    &__origin {\r\n      font-size: .12rem;\r\n      color: $light-fontColor;\r\n      line-height: 20px;\r\n      margin-left: .06rem;\r\n      text-decoration: line-through;\r\n    }\r\n    .product__number {\r\n      position: absolute;\r\n      bottom: .12rem;\r\n      right: 0;\r\n      &__minus, &__plus {\r\n        display: inline-block;\r\n        height: .2rem;\r\n        line-height: .16rem;\r\n        width: .2rem;\r\n        border-radius: 50%;\r\n        font-size: .2rem;\r\n        text-align: center;\r\n      }\r\n      &__minus {\r\n        border: 0.01rem solid $medium-fontColor;\r\n        color: $medium-fontColor;\r\n        margin-right: .05rem;\r\n      }\r\n      &__plus {\r\n        background: $btn-bgColor;\r\n        color: $bgColor;\r\n        margin-left: .05rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}